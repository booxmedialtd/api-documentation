swagger: "2.0"
info:
  description: |
    
  version: "1.0.0"
  title: "Metadata endpoints"
host: "demo.aminocom.com"
basePath: "/api/metadata/v1/"
tags:
- name: "Seasons"
  description: "A Season is a grouping of Episodes into a collection. A Series may have multiple Seasons"
- name: "Programs"
  description: |
    A program is something that can be shown.
    It could be a television show (like "Friends") or a movie (like "Die Hard") that appears on a Channel at a given time in a BroadcastSlot.
    It could equally be a VOD item that can be played on demand.
    The entity "Program" is a hook into the metadata system and does not include any information about when (or how) the thing can be played.  It's just information about what can be played.
- name: "Series"
  description: |
    Multiple Programs are grouped into a Series which consists of several Episodes that belong to Seasons
    A Program can be either part of a Series (in which case it is an Episode) or stand alone.
    Note: The plural of a single Series is Series
- name: "Genres"
  description: "Known as a 'category' in our legacy API, a Program or a Channel as a whole may be associated with a number of Genres"
- name: "CreditedPerson"
  description: "A CreditedPerson is any individual or company that can be credited with any portion of the production of the Program. Examples could include actors, creators, directors, writers, special effects companies, and so on."
- name: "Channels"
  description: |
    A channel is a source of content in the form of stream or signal, which can be watched / listened on a multimedia device.
    A channel is one of the elements that users can subscribe to.
    One Channel can be related to many BroadcastSlots which are placeholders in which a Program can be displayed.
    Channels have a lifetime which we refer to as "visibility".  Outside of this window the channel may not be watched.
    Although conceptually we could create a channel that holds a single program (for example a live event) this is not done in practice.
schemes:
- "https"
paths:

# ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

  /seasons/{season_id}:
    get:
      summary: "Get an individual season"
      tags:
      - "Seasons"
      operationId: "GetSeasonEntity"
      produces:
      - "application/json"
      parameters:
      - in: "path"
        name: "season_id"
        type: "string"
        required: true
        description: "The identifier of the season"
      - in: query
        name: language
        type: string
        required: false
        description: "The PK of the language to use, which will be a 3 character ISO 639-2 string (e.g.: fin).  If this is omitted the browser 'Accept-Language' will be used if it is available, and otherwise the system defined default.  If the requested language is not available then the system will return translations in order of the system defined preferences"

      responses:
        200:
          description: "Successful response"
          schema:
            type: "object"
            required:
            - data
            properties:
              data:
                type: object
                required:
                - type
                - id
                properties:
                  type:
                    type: string
                    example: Season
                  id:
                    type: string
                    description: "The id of the entity being referenced"
                    example: "e00adc12-6fcb-4176-832f-45a0b84aa908"
                  attributes:
                    $ref: "https://raw.githubusercontent.com/booxmedialtd/api-documentation/master/snippets/EnrichedMetadata/SeasonEntity.yml#SeasonEntity"


  /seasons/{season_id}/episodes:
    get:
      summary: "Get list of episodes for a seasons.  Note:  This endpoint will *always* return included Programs and does not support the `include` parameter in order to comply with the JSON API spec requirment that If an endpoint supports the include parameter and a client supplies it, the server MUST NOT include unrequested resource objects in the included section of the compound document."
      tags:
      - "Seasons"
      operationId: "SeeSeasonEpisodes"
      produces:
      - "application/json"
      parameters:
      - in: "path"
        name: "season_id"
        type: "string"
        required: true
        description: "The identifier of the season"
      - in: query
        name: language
        type: string
        required: false
        description: "The PK of the language to use, which will be a 3 character ISO 639-2 string (e.g.: fin).  If this is omitted the browser 'Accept-Language' will be used if it is available, and otherwise the system defined default.  If the requested language is not available then the system will return translations in order of the system defined preferences"

      responses:
        200:
          description: "Successful response"
          schema:
            type: "object"
            required:
            - data
            properties:
              data:
                type: array
                items:
                  type: object
                  required:
                  - type
                  - id
                  properties:
                    type:
                      type: string
                      example: Episode
                    id:
                      type: string
                      description: "The id of the entity being referenced"
                      example: "63bbc7de-d394-4252-abf9-701f35310b1e"
                    attributes:
                      $ref: "https://raw.githubusercontent.com/booxmedialtd/api-documentation/master/snippets/EnrichedMetadata/EpisodeEntity.yml#EpisodeEntity"
              included:
                type: array
                description: "This key MUST always be included"
                items:
                  type: object
                  description: ""
                  properties:
                    type:
                      type: string
                      example: "Program"
                      description: The type of the entity that is being included.  It will be Program
                    id:
                      type: string
                      example: "d0de0088-3141-439e-8455-839bdb8f6cec"
                    attributes:
                        $ref: "https://raw.githubusercontent.com/booxmedialtd/api-documentation/master/snippets/EnrichedMetadata/ProgramEntity.yml#ProgramEntity"


  /seasons/{season_id}/series:
    get:
      summary: |
        Get list of the series that this season belongs to.  We would expect it to belong to a single series, but we're not going to bake this restriction into the response.  
        See also the `/series/{series_id}/programs` endpoint that returns the direct relationships.  By combining the usage of these two endpoints the client is able to 
        distinguish between series related to programs that don't have Seasons (like the News) and ones that do (like Friends)
      tags:
      - "Seasons"
      operationId: "SeeSeasonSeries"
      produces:
      - "application/json"
      parameters:
      - in: "path"
        name: "season_id"
        type: "string"
        required: true
        description: "The identifier of the season"
      - in: query
        name: language
        type: string
        required: false
        description: "The PK of the language to use, which will be a 3 character ISO 639-2 string (e.g.: fin).  If this is omitted the browser 'Accept-Language' will be used if it is available, and otherwise the system defined default.  If the requested language is not available then the system will return translations in order of the system defined preferences"

      responses:
        200:
          description: "Successful response"
          schema:
            type: "object"
            required:
            - data
            properties:
              data:
                type: array
                items:
                  type: object
                  required:
                  - type
                  - id
                  properties:
                    type:
                      type: string
                      example: Series
                    id:
                      type: string
                      description: "The id of the entity being referenced"
                      example: "f9df1401-9d25-48e0-b5d6-0745a86bd975"
                    attributes:
                      $ref: "https://raw.githubusercontent.com/booxmedialtd/api-documentation/master/snippets/EnrichedMetadata/SeriesEntity.yml#SeriesEntity"

# ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

  /programs:
    get:
      summary: "Get an index of programs.  By default you should return this list sorted by release_year descending and force pagination (100 results per page).  NOTE:  there is a Swagger limitation that includes the `series` relationship into the entities, ignore this for this endpoint"
      tags:
      - "Programs"
      operationId: "GetProgramIndex"
      produces:
      - "application/json"
      parameters:
      - in: query
        name: language
        type: string
        required: false
        description: "The PK of the language to use, which will be a 3 character ISO 639-2 string (e.g.: fin).  If this is omitted the browser 'Accept-Language' will be used if it is available, and otherwise the system defined default.  If the requested language is not available then the system will return translations in order of the system defined preferences"
      - in: query
        name: page_number
        type: integer
        required: false
        description: "The page number (100 results per page) of results to retrieve.  If this parameter is ommitted then it is assumed to be 1 (not zero based, 1 means the first page)"

      responses:
        200:
          description: "Successful response"
          schema:
            type: "object"
            required:
            - data
            properties:
              data:
                type: array
                items:
                  type: object
                  required:
                  - type
                  - id
                  properties:
                    type:
                      type: string
                      example: Program
                    id:
                      type: string
                      description: "The id of the entity being referenced"
                      example: "3173335a-810b-4b53-b009-122a169f9920"
                    attributes:
                      $ref: "https://raw.githubusercontent.com/booxmedialtd/api-documentation/master/snippets/EnrichedMetadata/ProgramEntity.yml#ProgramEntity"


  /programs/{program_id}:
    get:
      summary: "Get a specific program.  NOTE:  This endpoint will *always* include [Series|Episode|Season] relationships and DOES NOT support the `included` parameter."
      tags:
      - "Programs"
      operationId: "GetProgram"
      produces:
      - "application/json"
      parameters:
      - in: "path"
        name: "program_id"
        type: "string"
        required: true
        description: "The identifier of the program"
      - in: query
        name: language
        type: string
        required: false
        description: "The PK of the language to use, which will be a 3 character ISO 639-2 string (e.g.: fin).  If this is omitted the browser 'Accept-Language' will be used if it is available, and otherwise the system defined default.  If the requested language is not available then the system will return translations in order of the system defined preferences"

      responses:
        200:
          description: "Successful response"
          schema:
            type: "object"
            required:
            - data
            properties:
              data:
                type: object
                required:
                - type
                - id
                properties:
                  type:
                    type: string
                    example: Program
                  id:
                    type: string
                    description: "The id of the entity being referenced"
                    example: "3173335a-810b-4b53-b009-122a169f9920"
                  attributes:
                    $ref: "https://raw.githubusercontent.com/booxmedialtd/api-documentation/master/snippets/EnrichedMetadata/ProgramEntity.yml#ProgramEntity"
              included:
                type: array
                description: "This key MUST NOT be included if the `included` parameter is not used in the request URL"
                items:
                  type: object
                  description: "Note that different sorts of entity may be included (this array is not guaranteed to be homogenous), but the Swagger definition does not allow including more than one example of an item of an array so only one type is shown."
                  properties:
                    type:
                      type: string
                      example: "Series"
                      description: The type of the entity that is being included.  It will be one of [Series|Episode|Season]
                    id:
                      type: string
                      example: "f9df1401-9d25-48e0-b5d6-0745a86bd975"
                    attributes:
                        $ref: "https://raw.githubusercontent.com/booxmedialtd/api-documentation/master/snippets/EnrichedMetadata/SeriesEntity.yml#SeriesEntity"
  
# ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

  /series:
    get:
      summary: "Get an index of series"
      tags:
      - "Series"
      operationId: "GetSeriesIndex"
      produces:
      - "application/json"
      parameters:
      - in: query
        name: language
        type: string
        required: false
        description: "The PK of the language to use, which will be a 3 character ISO 639-2 string (e.g.: fin).  If this is omitted the browser 'Accept-Language' will be used if it is available, and otherwise the system defined default.  If the requested language is not available then the system will return translations in order of the system defined preferences"

      responses:
        200:
          description: "Successful response"
          schema:
            type: "object"
            required:
            - data
            properties:
              data:
                type: array
                items:
                  type: object
                  required:
                  - type
                  - id
                  properties:
                    type:
                      type: string
                      example: Series
                    id:
                      type: string
                      description: "The id of the entity being referenced"
                      example: "f9df1401-9d25-48e0-b5d6-0745a86bd975"
                    attributes:
                      $ref: "https://raw.githubusercontent.com/booxmedialtd/api-documentation/master/snippets/EnrichedMetadata/SeriesEntity.yml#SeriesEntity"



  /series/{series_id}:
    get:
      summary: "Get an individual series"
      tags:
      - "Series"
      operationId: "GetSeriesEntity"
      produces:
      - "application/json"
      parameters:
      - in: "path"
        name: "series_id"
        type: "string"
        required: true
        description: "The identifier of the series"
      - in: query
        name: language
        type: string
        required: false
        description: "The PK of the language to use, which will be a 3 character ISO 639-2 string (e.g.: fin).  If this is omitted the browser 'Accept-Language' will be used if it is available, and otherwise the system defined default.  If the requested language is not available then the system will return translations in order of the system defined preferences"

      responses:
        200:
          description: "Successful response"
          schema:
            type: "object"
            required:
            - data
            properties:
              data:
                type: object
                required:
                - type
                - id
                properties:
                  type:
                    type: string
                    example: Series
                  id:
                    type: string
                    description: "The id of the entity being referenced"
                    example: "f9df1401-9d25-48e0-b5d6-0745a86bd975"
                  attributes:
                    $ref: "https://raw.githubusercontent.com/booxmedialtd/api-documentation/master/snippets/EnrichedMetadata/SeriesEntity.yml#SeriesEntity"



  /series/{series_id}/programs:
    get:
      summary: "Get list of programs for a series - this should only be Programs that are *directly* related to a Series and NOT Programs that are transitively related through an Episode."
      tags:
      - "Series"
      operationId: "SeeSeriesPrograms"
      produces:
      - "application/json"
      parameters:
      - in: "path"
        name: "series_id"
        type: "string"
        required: true
        description: "The identifier of the series"
      - in: query
        name: language
        type: string
        required: false
        description: "The PK of the language to use, which will be a 3 character ISO 639-2 string (e.g.: fin).  If this is omitted the browser 'Accept-Language' will be used if it is available, and otherwise the system defined default.  If the requested language is not available then the system will return translations in order of the system defined preferences"

      responses:
        200:
          description: "Successful response"
          schema:
            type: "object"
            required:
            - data
            properties:
              data:
                type: array
                items:
                  type: object
                  required:
                  - type
                  - id
                  properties:
                    type:
                      type: string
                      example: Program
                    id:
                      type: string
                      description: "The id of the entity being referenced"
                      example: "cc96d60f-8dc3-4a00-9d1f-761fe4933d8a"
                    attributes:
                      $ref: "https://raw.githubusercontent.com/booxmedialtd/api-documentation/master/snippets/EnrichedMetadata/ProgramEntity.yml#ProgramEntity"



  /series/{series_id}/seasons:
    get:
      summary: "Get list of seasons for a series.  (Note:  There is a transitive relationship to Episodes through Seasons)"
      tags:
      - "Series"
      operationId: "SeeSeriesSeasons"
      produces:
      - "application/json"
      parameters:
      - in: "path"
        name: "series_id"
        type: "string"
        required: true
        description: "The identifier of the series"
      - in: query
        name: language
        type: string
        required: false
        description: "The PK of the language to use, which will be a 3 character ISO 639-2 string (e.g.: fin).  If this is omitted the browser 'Accept-Language' will be used if it is available, and otherwise the system defined default.  If the requested language is not available then the system will return translations in order of the system defined preferences"

      responses:
        200:
          description: "Successful response"
          schema:
            type: "object"
            required:
            - data
            properties:
              data:
                type: array
                items:
                  type: object
                  required:
                  - type
                  - id
                  properties:
                    type:
                      type: string
                      example: Season
                    id:
                      type: string
                      description: "The id of the entity being referenced"
                      example: "feaf803a-3ca9-4d2e-b86b-9d217183efc5"
                    attributes:
                      $ref: "https://raw.githubusercontent.com/booxmedialtd/api-documentation/master/snippets/EnrichedMetadata/SeasonEntity.yml#SeasonEntity"

# ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

  /genres/{genre_id}/programs:
    get:
      summary: "Get list of programs for a genre."
      tags:
      - "Genres"
      operationId: "SeeGenrePrograms"
      produces:
      - "application/json"
      parameters:
      - in: "path"
        name: "genre_id"
        type: "string"
        required: true
        description: "The identifier of the genre"
      - in: query
        name: language
        type: string
        required: false
        description: "The PK of the language to use, which will be a 3 character ISO 639-2 string (e.g.: fin).  If this is omitted the browser 'Accept-Language' will be used if it is available, and otherwise the system defined default.  If the requested language is not available then the system will return translations in order of the system defined preferences"

      responses:
        200:
          description: "Successful response"
          schema:
            type: "object"
            required:
            - data
            properties:
              data:
                type: array
                items:
                  type: object
                  required:
                  - type
                  - id
                  properties:
                    type:
                      type: string
                      example: Genre
                    id:
                      type: string
                      description: "The id of the entity being referenced"
                      example: "cc96d60f-8dc3-4a00-9d1f-761fe4933d8a"
                    attributes:
                      $ref: "https://raw.githubusercontent.com/booxmedialtd/api-documentation/master/snippets/EnrichedMetadata/ProgramEntity.yml#ProgramEntity"

# ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

  /credited_persons/{credited_person_id}/programs:
    get:
      summary: "Get list of programs for a credited person.  Note: This endpoint supports the `filter` parameter, please see http://jsonapi.org/recommendations/#filtering for syntax specification."
      tags:
      - "CreditedPerson"
      operationId: "SeeCreditedPersonPrograms"
      produces:
      - "application/json"
      parameters:
      - in: "path"
        name: "credited_person_id"
        type: "string"
        required: true
        description: "The identifier of the genre"
      - in: query
        name: language
        type: string
        required: false
        description: "The PK of the language to use, which will be a 3 character ISO 639-2 string (e.g.: fin).  If this is omitted the browser 'Accept-Language' will be used if it is available, and otherwise the system defined default.  If the requested language is not available then the system will return translations in order of the system defined preferences"
      - in: query
        name: filter
        type: array
        required: false
        description: "[See http://jsonapi.org/recommendations/#filtering]  Supported fields are: `role`"

      responses:
        200:
          description: "Successful response"
          schema:
            type: "object"
            required:
            - data
            properties:
              data:
                type: array
                items:
                  type: object
                  required:
                  - type
                  - id
                  properties:
                    type:
                      type: string
                      example: CreditedPerson
                    id:
                      type: string
                      description: "The id of the entity being referenced"
                      example: "cc96d60f-8dc3-4a00-9d1f-761fe4933d8a"
                    attributes:
                      $ref: "https://raw.githubusercontent.com/booxmedialtd/api-documentation/master/snippets/EnrichedMetadata/ProgramEntity.yml#ProgramEntity"


# ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

  /channels:
    get:
      summary: "Get an index of Channels.  NOTE:  This endpoint will *always* include Genre and Product relationships and DOES NOT support the `included` parameter."
      tags:
      - "Channels"
      operationId: "GetChannelIndex"
      produces:
      - "application/json"
      parameters:
      - in: query
        name: language
        type: string
        required: false
        description: "The PK of the language to use, which will be a 3 character ISO 639-2 string (e.g.: fin).  If this is omitted the browser 'Accept-Language' will be used if it is available, and otherwise the system defined default.  If the requested language is not available then the system will return translations in order of the system defined preferences"
      - in: query
        name: page_number
        type: integer
        required: false
        description: "The page number (100 results per page) of results to retrieve.  If this parameter is ommitted then it is assumed to be 1 (not zero based, 1 means the first page)"

      responses:
        200:
          description: "Successful response"
          schema:
            type: "object"
            required:
            - data
            properties:
              data:
                type: array
                items:
                  type: object
                  required:
                  - type
                  - id
                  properties:
                    type:
                      type: string
                      example: Channel
                    id:
                      type: string
                      description: "The id of the entity being referenced"
                      example: "89e3a147-2ff6-448f-959f-a6200434259d"
                    attributes:
                      $ref: "https://raw.githubusercontent.com/booxmedialtd/api-documentation/master/snippets/Schedule/ChannelEntity.yml#ChannelEntity"
              included:
                type: array
                description: "This key MUST NOT be included if the `included` parameter is not used in the request URL"
                items:
                  type: object
                  description: "Note that different sorts of entity may be included (this array is not guaranteed to be homogenous), but the Swagger definition does not allow including more than one example of an item of an array so only one type is shown."
                  properties:
                    type:
                      type: string
                      example: "Product (or Genre)"
                      description: The type of the entity that is being included.
                    id:
                      type: string
                      example: "73079cf6-2b82-4ad1-8e45-727caf84298b"
                    attributes:
                        $ref: "https://raw.githubusercontent.com/booxmedialtd/api-documentation/master/snippets/Subscription/ProductEntity.yml#ProductEntity"

  /user/{user_id}/user_favourite_channels:
    get:
      summary: "Get an index of the users favourite channels"
      tags:
      - "Channels"
      operationId: "GetUserFavouriteChannelIndex"
      produces:
      - "application/json"
      parameters:
      - in: path
        name: user_id
        type: string
        required: true
        description: "The user identifier"

      responses:
        200:
          description: "Successful response"
          schema:
            type: "object"
            required:
            - data
            properties:
              data:
                type: array
                items:
                  type: object
                  required:
                  - type
                  - id
                  properties:
                    type:
                      type: string
                      example: UserFavouriteChannel
                    id:
                      type: string
                      description: "The id of the channel that is selected as a favourite.  The identity of the value object is bound to its value."
                      example: "123"
                    attributes:
                      $ref: "https://raw.githubusercontent.com/booxmedialtd/api-documentation/master/snippets/Schedule/UserFavouriteChannelValueObject.yml#UserFavouriteChannelValueObject"
