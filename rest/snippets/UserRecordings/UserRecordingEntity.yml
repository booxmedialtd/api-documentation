UserRecordingEntity:
    type: "object"
    required:
    - watched_time_seconds
    - automated_maintenance
    - content_flags
    - favourite
    - expires_at_timestamp
    properties:

      watched_time_seconds:
        type: integer
        format: int64
        description: "This maps onto the playback_duration field and stores the last point that a user has watched (if you restart from the beginning and stop it will overwrite the current value)."

      automated_maintenance:
        type: object
        required:
        - auto_delete
        properties:
          auto_delete:
            type: boolean
            description: Whether the recording should be considered for automatic deletion by maintenance scripts
          expires_at_timestamp:
            type: integer
            format: int64
            description: >-
              The unix epoch timestamp at which the recording expires and will no longer be available
              This key may be omitted if the "auto_delete" flag is false
          is_about_to_expire:
            type: boolean
            example: true
            description: >-
              This flag indicates that the recording is going to be deleted soon.
              The middleware will calculate this based on the channel expiry and the individual content expiry.
              This key may be omitted if the "auto_delete" flag is false

      content_flags:
          type: array
          items:
            $ref: "https://raw.githubusercontent.com/booxmedialtd/api-documentation/master/rest/snippets/EnrichedMetadata/ContentFlagValueObject.yml#/ContentFlagValueObject"

      favourite:
        type: boolean
        example: true
        description: >-
          Whether the user to whom this recording belongs has marked it as one of their favourites

      has_been_recorded:
        type: boolean
        example: true
        enum: [true,false]
        description: This will be set to "true" once the recording has been completed.  If it is "false" then the recording has been scheduled but has not finished.

      images:
        type: array
        description: >-
          Images of type "still_frame" will be generated by the transcoder.
          Otherwise images from the metadata may be included.
          Note that this field is optional and might not be present.
        items:
          $ref: "https://raw.githubusercontent.com/booxmedialtd/api-documentation/master/rest/snippets/EnrichedMetadata/ImageValueObject.yml#/ImageValueObject"

      original_broadcast_slot:
        type: object
        description: "We store this as a value object in this entity rather than relating to the BroadcastSlot because the remote entity is not guaranteed to be immutable"
        properties:
          channel_id:
            type: string
            example: 8baec70c-135d-43bb-8f96-7c4b13937f1a
          time_start:
            type: integer
            example: 1516798894
          title:
            type: string
            example: "Die Hard"
            description: This is a multi-lingual field and will contain the title of the Program in all of the languages supported for this field.

      recording_location:
        type: object
        required:
        - device_type
        properties:
          device_type:
            type: string
            description: >-
              What type of device the recording was made on, only the values [cloud,stb,foreign] are acceptable
              The key "foreign" is reserved for situations where a third party is responsible for recording.
            enum: [cloud,stb,foreign]
            example: stb
          foreign_reference:
            type: string
            description: >-
              The identifier in a third party recording system for the recording
              This field should be omitted if Amino is responsible for the recording, that is when device_type is either "cloud" or "stb"
            example: "abc123"
          device_id:
            type: string
            description: >-
              A unique identifier for the device that made the recording.
              This field may be omitted when the device type is "cloud" or "foreign"
            example: 25-1234567
          created_at_timestamp:
            type: integer
            description: >-
              The Unix epoch timestamp that the recording was created.  Note that for the case of foreign recordings this field
              should contain the timestamp at which we were notified about the recoding completion if the actual file time
              is not available.
          file_properties:
            type: object
            description: This field may be omitted when the device type is "foreign"
            required:
            - resource_location
            properties:
              file_size_megabytes:
                type: integer
                description:  The approximate size of the file, in megabytes.
                example: 648
              resource_location:
                type: string
                description: This will be a fully qualified path and filename, including the scheme
                example: >-
                  file://host/path
              recording_container:
                type: string
                description: >-
                  The container format of the file (http://en.wikipedia.org/wiki/Digital_container_format)
                example: mp4
              recording_video_codec:
                type: string
                description: >-
                  The codec that the file is encoded with (https://en.wikipedia.org/wiki/Codec)
                example: h.264
              recording_audio_codec:
                type: string
                description: >-
                  The codec that the file is encoded with (https://en.wikipedia.org/wiki/Codec)
                example: mp3

      relationships:
        type: object
        description: "This key MUST ONLY be included if Program data is being included as a compound document."
        required:
        - streams
        properties:
          streams:
            type: object
            required:
            - links
            properties:
              links:
                type: object
                required:
                - watch
                properties:
                  watch:
                    type: string
                    example: /user/c2de5595-e63d-4346-bc6d-1ef11fbe9fb6/user_recordings/%7B%7B%22user_id%22%3A1%2C%22epg_id%22%3A749%2C%22continuous%22%3A0%7D%7D/streams
                    description: >-
                      A string containing the location of the streams related to this entity.  Note: The parameters are URL encoded for the convenience of the client.
          program:
            type: object
            required:
            - data
            properties:
              data:
                type: object
                description: Which program was recorded
                required:
                - id
                - type
                properties:
                  id:
                    type: string
                    example: "d0de0088-3141-439e-8455-839bdb8f6cec"
                  type:
                    type: string
                    example: "Program"

          recording_request:
            type: object
            required:
            - data
            properties:
              data:
                type: object
                description: The recording request that caused this recording to be created
                required:
                - id
                - type
                properties:
                  id:
                    type: string
                    example: "23290f7e-567f-487f-b64e-323b0f4a6054"
                  type:
                    type: string
                    example: "RecordingRequest"